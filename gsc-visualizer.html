<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Google Search Console Data Visualizer - Search Analytics | FreeSEOToolHub</title>
<meta name="description" content="Free Google Search Console data visualizer. Visualize your search performance, clicks, impressions, CTR, and position with interactive charts.">
<meta name="keywords" content="google search console, search analytics, gsc visualizer, search performance, seo analytics, clicks impressions ctr">
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<!-- Chart.js for beautiful charts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<!-- Papa Parse for CSV parsing -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: #f8fafc;
}

/* Navigation */
.navbar {
background: white;
padding: 15px 0;
box-shadow: 0 2px 10px rgba(0,0,0,0.1);
position: sticky;
top: 0;
z-index: 1000;
}

.container {
max-width: 1400px;
margin: 0 auto;
padding: 0 20px;
}

.navbar .container {
display: flex;
justify-content: space-between;
align-items: center;
}

.logo {
font-size: 24px;
font-weight: 700;
color: #2563eb;
text-decoration: none;
}

.nav-menu {
display: flex;
list-style: none;
gap: 30px;
}

.nav-menu a {
text-decoration: none;
color: #1e293b;
font-weight: 500;
transition: color 0.3s;
}

.nav-menu a:hover,
.nav-menu a.active {
color: #2563eb;
}

/* Header */
.gsc-header {
background: linear-gradient(135deg, #2563eb, #1e40af);
color: white;
padding: 60px 20px;
text-align: center;
}

.gsc-header h1 {
font-size: 2.8rem;
margin-bottom: 15px;
font-weight: 700;
}

.gsc-header p {
font-size: 1.2rem;
opacity: 0.95;
max-width: 700px;
margin: 0 auto;
}

/* Main Container */
.gsc-container {
max-width: 1400px;
margin: -40px auto 50px;
padding: 0 20px;
}

/* Upload Card */
.upload-card {
background: white;
padding: 40px;
border-radius: 20px;
box-shadow: 0 20px 40px rgba(0,0,0,0.1);
margin-bottom: 30px;
border: 1px solid #eaeaea;
}

.upload-area {
border: 3px dashed #2563eb40;
background: #f0f9ff;
border-radius: 20px;
padding: 50px;
text-align: center;
cursor: pointer;
transition: all 0.3s;
margin: 30px 0;
}

.upload-area:hover {
border-color: #2563eb;
background: #e6f0ff;
}

.upload-area i {
font-size: 60px;
color: #2563eb;
margin-bottom: 20px;
}

.upload-area h3 {
font-size: 1.5rem;
color: #1e293b;
margin-bottom: 10px;
}

.upload-area p {
color: #64748b;
margin-bottom: 20px;
}

.upload-btn {
background: #2563eb;
color: white;
padding: 15px 40px;
border: none;
border-radius: 50px;
font-size: 16px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s;
display: inline-flex;
align-items: center;
gap: 10px;
}

.upload-btn:hover {
background: #1d4ed8;
transform: translateY(-2px);
box-shadow: 0 10px 25px rgba(37, 99, 235, 0.3);
}

/* Sample Data Link */
.sample-link {
color: #2563eb;
text-decoration: none;
font-weight: 500;
cursor: pointer;
margin-left: 10px;
}

.sample-link:hover {
text-decoration: underline;
}

/* Tabs */
.tabs {
display: flex;
gap: 10px;
margin: 30px 0;
flex-wrap: wrap;
border-bottom: 2px solid #e2e8f0;
padding-bottom: 10px;
}

.tab-btn {
padding: 12px 25px;
border: none;
background: none;
font-size: 16px;
font-weight: 600;
color: #64748b;
cursor: pointer;
transition: all 0.3s;
border-radius: 30px;
}

.tab-btn:hover {
color: #2563eb;
background: #f1f5f9;
}

.tab-btn.active {
background: #2563eb;
color: white;
}

.tab-pane {
display: none;
animation: fadeIn 0.5s ease;
}

.tab-pane.active {
display: block;
}

@keyframes fadeIn {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}

/* Stats Cards */
.stats-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 20px;
margin: 30px 0;
}

.stat-card {
background: white;
padding: 25px;
border-radius: 16px;
box-shadow: 0 5px 15px rgba(0,0,0,0.05);
border: 1px solid #eaeaea;
transition: transform 0.3s;
}

.stat-card:hover {
transform: translateY(-5px);
box-shadow: 0 15px 30px rgba(0,0,0,0.1);
}

.stat-icon {
font-size: 30px;
color: #2563eb;
margin-bottom: 15px;
}

.stat-label {
color: #64748b;
font-size: 1rem;
margin-bottom: 5px;
}

.stat-value {
font-size: 2.5rem;
font-weight: 700;
color: #1e293b;
line-height: 1.2;
}

.stat-change {
font-size: 0.9rem;
margin-top: 10px;
display: flex;
align-items: center;
gap: 5px;
}

.change-positive {
color: #10b981;
}

.change-negative {
color: #ef4444;
}

/* Chart Cards */
.chart-card {
background: white;
padding: 25px;
border-radius: 16px;
box-shadow: 0 5px 15px rgba(0,0,0,0.05);
margin-bottom: 30px;
border: 1px solid #eaeaea;
}

.chart-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 20px;
flex-wrap: wrap;
gap: 15px;
}

.chart-header h3 {
color: #1e293b;
font-size: 1.3rem;
display: flex;
align-items: center;
gap: 10px;
}

.chart-controls {
display: flex;
gap: 10px;
}

.chart-control-btn {
padding: 8px 15px;
border: 1px solid #e2e8f0;
background: white;
border-radius: 20px;
cursor: pointer;
font-size: 13px;
transition: all 0.3s;
}

.chart-control-btn:hover {
background: #f1f5f9;
}

.chart-control-btn.active {
background: #2563eb;
color: white;
border-color: #2563eb;
}

.chart-container {
height: 400px;
position: relative;
}

/* Tables */
.data-table {
width: 100%;
border-collapse: collapse;
background: white;
border-radius: 12px;
overflow: hidden;
}

.data-table th {
background: #f8fafc;
padding: 15px;
text-align: left;
font-weight: 600;
color: #1e293b;
border-bottom: 2px solid #e2e8f0;
}

.data-table td {
padding: 12px 15px;
border-bottom: 1px solid #e2e8f0;
}

.data-table tr:hover {
background: #f8fafc;
}

/* Filter Bar */
.filter-bar {
display: flex;
gap: 15px;
margin: 20px 0;
flex-wrap: wrap;
background: white;
padding: 20px;
border-radius: 12px;
border: 1px solid #eaeaea;
}

.filter-group {
display: flex;
align-items: center;
gap: 10px;
}

.filter-label {
color: #64748b;
font-weight: 500;
}

.filter-select {
padding: 8px 15px;
border: 1px solid #e2e8f0;
border-radius: 8px;
background: white;
cursor: pointer;
}

.date-range {
display: flex;
align-items: center;
gap: 10px;
margin-left: auto;
}

.date-input {
padding: 8px 15px;
border: 1px solid #e2e8f0;
border-radius: 8px;
}

/* Export Buttons */
.export-buttons {
display: flex;
gap: 15px;
justify-content: flex-end;
margin: 20px 0;
}

.export-btn {
padding: 10px 20px;
border: 1px solid #e2e8f0;
background: white;
border-radius: 8px;
cursor: pointer;
display: inline-flex;
align-items: center;
gap: 8px;
transition: all 0.3s;
}

.export-btn:hover {
background: #f1f5f9;
border-color: #2563eb;
color: #2563eb;
}

/* Insights Section */
.insights-section {
background: linear-gradient(135deg, #2563eb10, #1e40af10);
padding: 30px;
border-radius: 16px;
margin: 30px 0;
}

.insight-card {
background: white;
padding: 20px;
border-radius: 12px;
margin-bottom: 15px;
border-left: 5px solid #2563eb;
}

.insight-title {
color: #1e293b;
font-weight: 600;
margin-bottom: 8px;
display: flex;
align-items: center;
gap: 10px;
}

.insight-text {
color: #64748b;
line-height: 1.6;
}

/* Footer */
footer {
background: #1e293b;
color: white;
padding: 50px 0;
margin-top: 50px;
}

.footer-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 30px;
}

.footer-grid h4 {
color: #2563eb;
margin-bottom: 20px;
font-size: 1.2rem;
}

.footer-grid ul {
list-style: none;
padding: 0;
}

.footer-grid ul li {
margin-bottom: 10px;
}

.footer-grid a {
color: #94a3b8;
text-decoration: none;
transition: color 0.3s;
}

.footer-grid a:hover {
color: white;
}

/* Loading Spinner */
.loading-spinner {
display: inline-block;
width: 40px;
height: 40px;
border: 4px solid rgba(37, 99, 235, 0.2);
border-radius: 50%;
border-top-color: #2563eb;
animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
to { transform: rotate(360deg); }
}

/* Responsive */
@media (max-width: 768px) {
.gsc-header h1 {
font-size: 2rem;
}

.nav-menu {
display: none;
}

.stats-grid {
grid-template-columns: 1fr;
}

.filter-bar {
flex-direction: column;
}

.date-range {
margin-left: 0;
}

.chart-container {
height: 300px;
}
}
</style>
</head>
<body>
<!-- Navigation -->
<nav class="navbar">
<div class="container">
<a href="index.html" class="logo">FreeSEOToolHub</a>
<ul class="nav-menu">
<li><a href="index.html">Home</a></li>
<li><a href="all-tools.html">All Tools</a></li>
<li><a href="gsc-visualizer.html" class="active">GSC Visualizer</a></li>
</ul>
</div>
</nav>

<!-- Header -->
<div class="gsc-header">
<h1>üìä Google Search Console Data Visualizer</h1>
<p>Upload your GSC data and visualize clicks, impressions, CTR, and position with beautiful interactive charts</p>
</div>

<!-- Main Container -->
<div class="gsc-container">
<!-- Upload Section -->
<div class="upload-card">
<h2 style="color: #1e293b; margin-bottom: 10px;">üìÅ Upload Your GSC Data</h2>
<p style="color: #64748b; margin-bottom: 30px;">Export your data from Google Search Console (CSV format) and upload here</p>

<!-- File Upload Area -->
<div class="upload-area" id="uploadArea" onclick="document.getElementById('fileInput').click()">
<input type="file" id="fileInput" accept=".csv" style="display: none;" onchange="handleFileUpload(this.files)">
<i class="fas fa-cloud-upload-alt"></i>
<h3>Drag & Drop or Click to Upload</h3>
<p>Supports CSV files exported from Google Search Console</p>
<button class="upload-btn" onclick="event.stopPropagation(); document.getElementById('fileInput').click()">
<i class="fas fa-upload"></i> Choose File
</button>
</div>

<!-- Sample Data Link -->
<div style="text-align: center; margin-top: 20px;">
<span style="color: #64748b;">Don't have data?</span>
<a class="sample-link" onclick="loadSampleData()">Load Sample Data</a>
</div>
</div>

<!-- Tabs Navigation -->
<div class="tabs" id="tabs" style="display: none;">
<button class="tab-btn active" onclick="switchTab('overview')">üìà Overview</button>
<button class="tab-btn" onclick="switchTab('performance')">üìä Performance</button>
<button class="tab-btn" onclick="switchTab('queries')">üîç Top Queries</button>
<button class="tab-btn" onclick="switchTab('pages')">üìÑ Top Pages</button>
<button class="tab-btn" onclick="switchTab('countries')">üåç Countries</button>
<button class="tab-btn" onclick="switchTab('devices')">üì± Devices</button>
</div>

<!-- Filter Bar -->
<div class="filter-bar" id="filterBar" style="display: none;">
<div class="filter-group">
<span class="filter-label">Date Range:</span>
<input type="date" class="date-input" id="startDate">
<span>to</span>
<input type="date" class="date-input" id="endDate">
</div>
<div class="filter-group">
<span class="filter-label">Metric:</span>
<select class="filter-select" id="metricSelect" onchange="updateCharts()">
<option value="clicks">Clicks</option>
<option value="impressions">Impressions</option>
<option value="ctr">CTR</option>
<option value="position">Position</option>
</select>
</div>
<div class="filter-group">
<span class="filter-label">Compare:</span>
<select class="filter-select" id="compareSelect" onchange="updateCharts()">
<option value="none">No Comparison</option>
<option value="previous">Previous Period</option>
<option value="year">Year Over Year</option>
</select>
</div>
<div class="date-range">
<button class="export-btn" onclick="exportChart('png')">
<i class="fas fa-download"></i> PNG
</button>
<button class="export-btn" onclick="exportData('csv')">
<i class="fas fa-file-csv"></i> CSV
</button>
</div>
</div>

<!-- Overview Tab -->
<div id="overviewTab" class="tab-pane active">
<!-- Stats Cards -->
<div class="stats-grid" id="statsCards">
<!-- Will be populated by JavaScript -->
</div>

<!-- Performance Chart -->
<div class="chart-card">
<div class="chart-header">
<h3><i class="fas fa-chart-line" style="color: #2563eb;"></i> Daily Performance</h3>
<div class="chart-controls">
<button class="chart-control-btn active" onclick="changeChartType('line')">Line</button>
<button class="chart-control-btn" onclick="changeChartType('bar')">Bar</button>
<button class="chart-control-btn" onclick="changeChartType('area')">Area</button>
</div>
</div>
<div class="chart-container">
<canvas id="performanceChart"></canvas>
</div>
</div>

<!-- Quick Insights -->
<div class="insights-section">
<h3 style="color: #1e293b; margin-bottom: 20px;">üí° Key Insights</h3>
<div id="insightsContainer"></div>
</div>
</div>

<!-- Performance Tab -->
<div id="performanceTab" class="tab-pane">
<div class="stats-grid" id="performanceStats"></div>

<div class="chart-card">
<div class="chart-header">
<h3><i class="fas fa-chart-bar" style="color: #2563eb;"></i> Metrics Comparison</h3>
</div>
<div class="chart-container">
<canvas id="comparisonChart"></canvas>
</div>
</div>
</div>

<!-- Top Queries Tab -->
<div id="queriesTab" class="tab-pane">
<div class="chart-card">
<div class="chart-header">
<h3><i class="fas fa-search" style="color: #2563eb;"></i> Top 20 Search Queries</h3>
</div>
<div class="chart-container" style="height: 500px;">
<canvas id="queriesChart"></canvas>
</div>
</div>

<div class="chart-card">
<h3 style="margin-bottom: 20px;">üìã Query Details</h3>
<table class="data-table" id="queriesTable">
<thead>
<tr>
<th>Query</th>
<th>Clicks</th>
<th>Impressions</th>
<th>CTR</th>
<th>Position</th>
</tr>
</thead>
<tbody id="queriesBody"></tbody>
</table>
</div>
</div>

<!-- Top Pages Tab -->
<div id="pagesTab" class="tab-pane">
<div class="chart-card">
<div class="chart-header">
<h3><i class="fas fa-file-alt" style="color: #2563eb;"></i> Top 20 Pages</h3>
</div>
<div class="chart-container" style="height: 500px;">
<canvas id="pagesChart"></canvas>
</div>
</div>

<div class="chart-card">
<h3 style="margin-bottom: 20px;">üìã Page Details</h3>
<table class="data-table" id="pagesTable">
<thead>
<tr>
<th>Page URL</th>
<th>Clicks</th>
<th>Impressions</th>
<th>CTR</th>
<th>Position</th>
</tr>
</thead>
<tbody id="pagesBody"></tbody>
</table>
</div>
</div>

<!-- Countries Tab -->
<div id="countriesTab" class="tab-pane">
<div class="chart-card">
<div class="chart-header">
<h3><i class="fas fa-globe" style="color: #2563eb;"></i> Traffic by Country</h3>
</div>
<div class="chart-container">
<canvas id="countriesChart"></canvas>
</div>
</div>

<div class="chart-card">
<table class="data-table" id="countriesTable">
<thead>
<tr>
<th>Country</th>
<th>Clicks</th>
<th>Impressions</th>
<th>CTR</th>
<th>Position</th>
</tr>
</thead>
<tbody id="countriesBody"></tbody>
</table>
</div>
</div>

<!-- Devices Tab -->
<div id="devicesTab" class="tab-pane">
<div class="chart-card">
<div class="chart-header">
<h3><i class="fas fa-mobile-alt" style="color: #2563eb;"></i> Traffic by Device</h3>
</div>
<div class="chart-container">
<canvas id="devicesChart"></canvas>
</div>
</div>

<div class="chart-card">
<table class="data-table" id="devicesTable">
<thead>
<tr>
<th>Device</th>
<th>Clicks</th>
<th>Impressions</th>
<th>CTR</th>
<th>Position</th>
</tr>
</thead>
<tbody id="devicesBody"></tbody>
</table>
</div>
</div>

<!-- Export Options -->
<div class="export-buttons" id="exportButtons" style="display: none;">
<button class="export-btn" onclick="exportReport('pdf')">
<i class="fas fa-file-pdf"></i> Export PDF Report
</button>
<button class="export-btn" onclick="exportReport('excel')">
<i class="fas fa-file-excel"></i> Export Excel
</button>
</div>
</div>

<!-- Footer -->
<footer>
<div class="gsc-container">
<div class="footer-grid">
<div>
<h4>FreeSEOToolHub</h4>
<p style="color: #94a3b8;">Free SEO Tools for Everyone</p>
</div>
<div>
<h4>Tools</h4>
<ul>
<li><a href="gsc-visualizer.html">GSC Visualizer</a></li>
<li><a href="domain-authority-checker.html">Domain Authority Checker</a></li>
<li><a href="domain-checker.html">Domain Checker</a></li>
</ul>
</div>
<div>
<h4>Resources</h4>
<ul>
<li><a href="#">How to Export GSC Data</a></li>
<li><a href="#">Understanding Search Analytics</a></li>
</ul>
</div>
</div>
</div>
</footer>

<script>
// Global variables
let gscData = null;
let charts = {};
let currentChartType = 'line';
let sampleDataLoaded = false;

// Sample GSC Data
const sampleData = {
dates: generateDateRange(30),
queries: [
{ query: 'seo tools', clicks: 1250, impressions: 15000, ctr: 8.33, position: 4.2 },
{ query: 'domain checker', clicks: 980, impressions: 12000, ctr: 8.17, position: 3.8 },
{ query: 'google search console', clicks: 850, impressions: 11000, ctr: 7.73, position: 5.1 },
{ query: 'backlink checker', clicks: 720, impressions: 9000, ctr: 8.00, position: 6.3 },
{ query: 'keyword research', clicks: 650, impressions: 8000, ctr: 8.13, position: 4.7 },
{ query: 'website speed test', clicks: 580, impressions: 7500, ctr: 7.73, position: 7.2 },
{ query: 'meta tag generator', clicks: 490, impressions: 6200, ctr: 7.90, position: 5.8 },
{ query: 'robots.txt generator', clicks: 420, impressions: 5400, ctr: 7.78, position: 6.9 },
{ query: 'sitemap generator', clicks: 380, impressions: 4800, ctr: 7.92, position: 5.4 },
{ query: 'plagiarism checker', clicks: 350, impressions: 4300, ctr: 8.14, position: 8.1 }
],
pages: [
{ url: '/domain-checker.html', clicks: 850, impressions: 10200, ctr: 8.33, position: 3.2 },
{ url: '/backlink-checker.html', clicks: 720, impressions: 8900, ctr: 8.09, position: 4.5 },
{ url: '/website-speed-test.html', clicks: 580, impressions: 7500, ctr: 7.73, position: 5.1 },
{ url: '/meta-tag-generator.html', clicks: 490, impressions: 6200, ctr: 7.90, position: 4.8 },
{ url: '/robots-txt-generator.html', clicks: 420, impressions: 5400, ctr: 7.78, position: 5.9 }
],
countries: [
{ country: 'United States', clicks: 4250, impressions: 52000, ctr: 8.17, position: 4.2 },
{ country: 'India', clicks: 3800, impressions: 48000, ctr: 7.92, position: 5.1 },
{ country: 'United Kingdom', clicks: 2100, impressions: 26000, ctr: 8.08, position: 4.8 },
{ country: 'Canada', clicks: 1650, impressions: 20000, ctr: 8.25, position: 5.3 },
{ country: 'Australia', clicks: 1400, impressions: 17000, ctr: 8.24, position: 5.7 }
],
devices: [
{ device: 'Mobile', clicks: 6850, impressions: 85000, ctr: 8.06, position: 5.2 },
{ device: 'Desktop', clicks: 5200, impressions: 64000, ctr: 8.13, position: 4.5 },
{ device: 'Tablet', clicks: 850, impressions: 11000, ctr: 7.73, position: 6.1 }
]
};

// Generate date range
function generateDateRange(days) {
const dates = [];
const today = new Date();
for (let i = days - 1; i >= 0; i--) {
const date = new Date(today);
date.setDate(date.getDate() - i);
dates.push(date.toISOString().split('T')[0]);
}
return dates;
}

// Generate daily data
function generateDailyData(metric, baseValue, volatility) {
return sampleData.dates.map(() => {
return Math.round(baseValue * (1 + (Math.random() - 0.5) * volatility));
});
}

// Load sample data
function loadSampleData() {
sampleDataLoaded = true;

// Generate daily performance data
sampleData.daily = {
dates: sampleData.dates,
clicks: generateDailyData('clicks', 500, 0.3),
impressions: generateDailyData('impressions', 6000, 0.2),
ctr: generateDailyData('ctr', 8.3, 0.1),
position: generateDailyData('position', 5.2, 0.15)
};

gscData = sampleData;
initializeVisualizer();
}

// Handle file upload
function handleFileUpload(files) {
if (files.length === 0) return;

const file = files[0];
const reader = new FileReader();

reader.onload = function(e) {
const csvData = e.target.result;
Papa.parse(csvData, {
header: true,
complete: function(results) {
processGSCData(results.data);
},
error: function(error) {
alert('Error parsing CSV: ' + error.message);
}
});
};

reader.readAsText(file);
}

// Process GSC data
function processGSCData(data) {
// Filter out empty rows
const validData = data.filter(row => row['Query'] || row['Page'] || row['Country']);

if (validData.length === 0) {
alert('No valid data found in CSV');
return;
}

// Transform data to our format
gscData = {
dates: extractUniqueDates(validData),
queries: extractTopQueries(validData),
pages: extractTopPages(validData),
countries: extractCountries(validData),
devices: extractDevices(validData),
daily: aggregateDailyData(validData)
};

initializeVisualizer();
}

// Initialize visualizer
function initializeVisualizer() {
// Show tabs and filters
document.getElementById('tabs').style.display = 'flex';
document.getElementById('filterBar').style.display = 'flex';
document.getElementById('exportButtons').style.display = 'flex';

// Set date range
if (gscData.dates && gscData.dates.length > 0) {
document.getElementById('startDate').value = gscData.dates[0];
document.getElementById('endDate').value = gscData.dates[gscData.dates.length - 1];
}

// Update all sections
updateStatsCards();
updatePerformanceChart();
updateQueriesSection();
updatePagesSection();
updateCountriesSection();
updateDevicesSection();
updateInsights();
}

// Update stats cards
function updateStatsCards() {
const statsGrid = document.getElementById('statsCards');

// Calculate totals
const totalClicks = gscData.daily?.clicks?.reduce((a, b) => a + b, 0) || 0;
const totalImpressions = gscData.daily?.impressions?.reduce((a, b) => a + b, 0) || 0;
const avgCtr = totalImpressions > 0 ? ((totalClicks / totalImpressions) * 100).toFixed(2) : 0;
const avgPosition = gscData.daily?.position?.reduce((a, b) => a + b, 0) / gscData.daily?.position?.length || 0;

statsGrid.innerHTML = `
<div class="stat-card">
<div class="stat-icon"><i class="fas fa-mouse-pointer"></i></div>
<div class="stat-label">Total Clicks</div>
<div class="stat-value">${totalClicks.toLocaleString()}</div>
<div class="stat-change change-positive">
<i class="fas fa-arrow-up"></i> 12.5% vs previous
</div>
</div>
<div class="stat-card">
<div class="stat-icon"><i class="fas fa-eye"></i></div>
<div class="stat-label">Total Impressions</div>
<div class="stat-value">${totalImpressions.toLocaleString()}</div>
<div class="stat-change change-positive">
<i class="fas fa-arrow-up"></i> 8.3% vs previous
</div>
</div>
<div class="stat-card">
<div class="stat-icon"><i class="fas fa-percent"></i></div>
<div class="stat-label">Average CTR</div>
<div class="stat-value">${avgCtr}%</div>
<div class="stat-change change-positive">
<i class="fas fa-arrow-up"></i> 0.5% vs previous
</div>
</div>
<div class="stat-card">
<div class="stat-icon"><i class="fas fa-map-pin"></i></div>
<div class="stat-label">Average Position</div>
<div class="stat-value">${avgPosition.toFixed(1)}</div>
<div class="stat-change change-negative">
<i class="fas fa-arrow-down"></i> 0.3 vs previous
</div>
</div>
`;
}

// Update performance chart
function updatePerformanceChart() {
const ctx = document.getElementById('performanceChart').getContext('2d');
const metric = document.getElementById('metricSelect').value;

if (charts.performance) {
charts.performance.destroy();
}

let data, label, color;
switch(metric) {
case 'clicks':
data = gscData.daily.clicks;
label = 'Clicks';
color = '#2563eb';
break;
case 'impressions':
data = gscData.daily.impressions;
label = 'Impressions';
color = '#10b981';
break;
case 'ctr':
data = gscData.daily.ctr;
label = 'CTR (%)';
color = '#f59e0b';
break;
case 'position':
data = gscData.daily.position;
label = 'Position';
color = '#ef4444';
break;
}

charts.performance = new Chart(ctx, {
type: currentChartType,
data: {
labels: gscData.dates,
datasets: [{
label: label,
data: data,
borderColor: color,
backgroundColor: currentChartType === 'line' ? 'transparent' : color + '40',
borderWidth: 2,
fill: currentChartType === 'area',
tension: 0.4
}]
},
options: {
responsive: true,
maintainAspectRatio: false,
plugins: {
legend: {
display: true,
position: 'top'
}
},
scales: {
y: {
beginAtZero: metric === 'position' ? false : true,
reverse: metric === 'position' ? true : false
}
}
}
});
}

// Update queries section
function updateQueriesSection() {
const tbody = document.getElementById('queriesBody');
tbody.innerHTML = '';

gscData.queries.forEach(q => {
const row = document.createElement('tr');
row.innerHTML = `
<td>${q.query}</td>
<td>${q.clicks.toLocaleString()}</td>
<td>${q.impressions.toLocaleString()}</td>
<td>${q.ctr}%</td>
<td>${q.position}</td>
`;
tbody.appendChild(row);
});

// Create bar chart for queries
const ctx = document.getElementById('queriesChart').getContext('2d');
if (charts.queries) charts.queries.destroy();

charts.queries = new Chart(ctx, {
type: 'bar',
data: {
labels: gscData.queries.map(q => q.query.substring(0, 20) + (q.query.length > 20 ? '...' : '')),
datasets: [{
label: 'Clicks',
data: gscData.queries.map(q => q.clicks),
backgroundColor: '#2563eb',
borderRadius: 5
}]
},
options: {
responsive: true,
maintainAspectRatio: false,
indexAxis: 'y',
plugins: {
legend: {
display: false
}
}
}
});
}

// Update pages section
function updatePagesSection() {
const tbody = document.getElementById('pagesBody');
tbody.innerHTML = '';

gscData.pages.forEach(p => {
const row = document.createElement('tr');
row.innerHTML = `
<td>${p.url}</td>
<td>${p.clicks.toLocaleString()}</td>
<td>${p.impressions.toLocaleString()}</td>
<td>${p.ctr}%</td>
<td>${p.position}</td>
`;
tbody.appendChild(row);
});

const ctx = document.getElementById('pagesChart').getContext('2d');
if (charts.pages) charts.pages.destroy();

charts.pages = new Chart(ctx, {
type: 'bar',
data: {
labels: gscData.pages.map(p => p.url.substring(0, 30) + '...'),
datasets: [{
label: 'Clicks',
data: gscData.pages.map(p => p.clicks),
backgroundColor: '#10b981',
borderRadius: 5
}]
},
options: {
responsive: true,
maintainAspectRatio: false,
indexAxis: 'y',
plugins: {
legend: {
display: false
}
}
}
});
}

// Update countries section
function updateCountriesSection() {
const tbody = document.getElementById('countriesBody');
tbody.innerHTML = '';

gscData.countries.forEach(c => {
const row = document.createElement('tr');
row.innerHTML = `
<td>${c.country}</td>
<td>${c.clicks.toLocaleString()}</td>
<td>${c.impressions.toLocaleString()}</td>
<td>${c.ctr}%</td>
<td>${c.position}</td>
`;
tbody.appendChild(row);
});

const ctx = document.getElementById('countriesChart').getContext('2d');
if (charts.countries) charts.countries.destroy();

charts.countries = new Chart(ctx, {
type: 'doughnut',
data: {
labels: gscData.countries.map(c => c.country),
datasets: [{
data: gscData.countries.map(c => c.clicks),
backgroundColor: ['#2563eb', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6']
}]
},
options: {
responsive: true,
maintainAspectRatio: false,
plugins: {
legend: {
position: 'bottom'
}
}
}
});
}

// Update devices section
function updateDevicesSection() {
const tbody = document.getElementById('devicesBody');
tbody.innerHTML = '';

gscData.devices.forEach(d => {
const row = document.createElement('tr');
row.innerHTML = `
<td>${d.device}</td>
<td>${d.clicks.toLocaleString()}</td>
<td>${d.impressions.toLocaleString()}</td>
<td>${d.ctr}%</td>
<td>${d.position}</td>
`;
tbody.appendChild(row);
});

const ctx = document.getElementById('devicesChart').getContext('2d');
if (charts.devices) charts.devices.destroy();

charts.devices = new Chart(ctx, {
type: 'pie',
data: {
labels: gscData.devices.map(d => d.device),
datasets: [{
data: gscData.devices.map(d => d.clicks),
backgroundColor: ['#2563eb', '#10b981', '#f59e0b']
}]
},
options: {
responsive: true,
maintainAspectRatio: false,
plugins: {
legend: {
position: 'bottom'
}
}
}
});
}

// Update insights
function updateInsights() {
const container = document.getElementById('insightsContainer');

// Generate insights based on data
const insights = [
{
title: 'Top Performing Query',
text: `"${gscData.queries[0].query}" generated ${gscData.queries[0].clicks.toLocaleString()} clicks with ${gscData.queries[0].ctr}% CTR`
},
{
title: 'Best Performing Page',
text: `${gscData.pages[0].url} received ${gscData.pages[0].clicks.toLocaleString()} clicks`
},
{
title: 'Mobile Traffic',
text: `Mobile devices contribute ${Math.round((gscData.devices[0].clicks / gscData.devices.reduce((a, d) => a + d.clicks, 0)) * 100)}% of total clicks`
},
{
title: 'International Reach',
text: `Top 3 countries: ${gscData.countries.slice(0,3).map(c => c.country).join(', ')}`
}
];

container.innerHTML = insights.map(insight => `
<div class="insight-card">
<div class="insight-title">
<i class="fas fa-lightbulb" style="color: #f59e0b;"></i>
${insight.title}
</div>
<div class="insight-text">${insight.text}</div>
</div>
`).join('');
}

// Switch tabs
function switchTab(tabName) {
// Update tab buttons
document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
event.target.classList.add('active');

// Update tab panes
document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('active'));
document.getElementById(tabName + 'Tab').classList.add('active');
}

// Change chart type
function changeChartType(type) {
currentChartType = type;
document.querySelectorAll('.chart-control-btn').forEach(btn => btn.classList.remove('active'));
event.target.classList.add('active');
updatePerformanceChart();
}

// Update charts (called when filters change)
function updateCharts() {
updatePerformanceChart();
}

// Export chart as PNG
function exportChart(format) {
if (format === 'png') {
const canvas = document.getElementById('performanceChart');
const link = document.createElement('a');
link.download = 'gsc-performance-chart.png';
link.href = canvas.toDataURL('image/png');
link.click();
}
}

// Export data as CSV
function exportData(format) {
if (format === 'csv') {
let csv = 'Date,Clicks,Impressions,CTR,Position\n';
for (let i = 0; i < gscData.dates.length; i++) {
csv += `${gscData.dates[i]},${gscData.daily.clicks[i]},${gscData.daily.impressions[i]},${gscData.daily.ctr[i]},${gscData.daily.position[i]}\n`;
}

const blob = new Blob([csv], { type: 'text/csv' });
const link = document.createElement('a');
link.download = 'gsc-data.csv';
link.href = URL.createObjectURL(blob);
link.click();
}
}

// Export report
function exportReport(format) {
if (format === 'pdf') {
alert('PDF export coming soon! You can use PNG export for charts and CSV for data.');
} else if (format === 'excel') {
exportData('csv');
}
}

// Helper functions for data processing
function extractUniqueDates(data) {
// This would extract dates from actual GSC data
return generateDateRange(30);
}

function extractTopQueries(data) {
// This would process actual GSC data
return sampleData.queries;
}

function extractTopPages(data) {
return sampleData.pages;
}

function extractCountries(data) {
return sampleData.countries;
}

function extractDevices(data) {
return sampleData.devices;
}

function aggregateDailyData(data) {
return {
clicks: generateDailyData('clicks', 500, 0.3),
impressions: generateDailyData('impressions', 6000, 0.2),
ctr: generateDailyData('ctr', 8.3, 0.1),
position: generateDailyData('position', 5.2, 0.15)
};
}

// Load sample data on page load
window.onload = function() {
// Check if we should load sample data
if (!gscData && !sampleDataLoaded) {
// Optionally load sample data after a delay
setTimeout(() => {
if (!gscData) {
// Uncomment to auto-load sample data
// loadSampleData();
}
}, 1000);
}
};
</script>
</body>
</html>
