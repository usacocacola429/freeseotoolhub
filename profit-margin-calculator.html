<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profit Margin Calculator - Free SEO Tool Hub</title>
<meta name="description" content="फ्री प्रॉफिट मार्जिन कैलकुलेटर। Gross profit, net profit, margin percentage calculate करें। Business profitability analysis tool।">

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZPG77KWVCP"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZPG77KWVCP');
gtag('config', 'G-PFPCTBFG3Y');
</script>

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
background: linear-gradient(135deg, #00b09b 0%, #96c93d 100%);
min-height: 100vh;
padding: 20px;
color: #333;
}

.container {
max-width: 1200px;
margin: 0 auto;
background: white;
border-radius: 20px;
overflow: hidden;
box-shadow: 0 25px 50px rgba(0,0,0,0.2);
}

/* Header */
.header {
background: linear-gradient(to right, #059669, #10b981);
color: white;
padding: 50px 40px;
text-align: center;
position: relative;
overflow: hidden;
}

.header::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.1)"/></svg>');
background-size: cover;
}

.header-content {
position: relative;
z-index: 1;
}

.header h1 {
font-size: 3rem;
margin-bottom: 15px;
text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
}

.header p {
font-size: 1.2rem;
opacity: 0.95;
max-width: 800px;
margin: 0 auto 20px;
}

.badge {
display: inline-block;
background: rgba(255,255,255,0.2);
backdrop-filter: blur(10px);
padding: 8px 20px;
border-radius: 30px;
border: 1px solid rgba(255,255,255,0.3);
font-size: 0.9rem;
margin-top: 10px;
}

/* Main Content */
.main-content {
padding: 40px;
display: grid;
grid-template-columns: 1fr 1fr;
gap: 40px;
}

@media (max-width: 900px) {
.main-content {
grid-template-columns: 1fr;
}
}

/* Input Section */
.input-section {
background: #F8FAFC;
padding: 35px;
border-radius: 15px;
border: 1px solid #E2E8F0;
}

h2 {
color: #1E293B;
margin-bottom: 25px;
font-size: 1.8rem;
font-weight: 600;
display: flex;
align-items: center;
gap: 12px;
}

.form-group {
margin-bottom: 25px;
}

label {
display: block;
margin-bottom: 10px;
color: #475569;
font-weight: 500;
font-size: 1rem;
}

.input-with-icon {
position: relative;
}

.input-icon {
position: absolute;
left: 15px;
top: 50%;
transform: translateY(-50%);
color: #94A3B8;
font-weight: 600;
}

input, select {
width: 100%;
padding: 16px 15px 16px 40px;
border: 2px solid #E2E8F0;
border-radius: 12px;
font-size: 1.1rem;
transition: all 0.3s;
background: white;
}

input:focus, select:focus {
outline: none;
border-color: #059669;
box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);
}

.input-row {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 15px;
}

.btn {
padding: 16px 30px;
border: none;
border-radius: 12px;
font-size: 1.1rem;
font-weight: 600;
cursor: pointer;
transition: all 0.3s;
display: inline-flex;
align-items: center;
gap: 12px;
}

.btn-primary {
background: linear-gradient(to right, #059669, #10b981);
color: white;
width: 100%;
justify-content: center;
margin-top: 20px;
}

.btn-primary:hover {
background: linear-gradient(to right, #047857, #059669);
transform: translateY(-2px);
box-shadow: 0 10px 25px rgba(5, 150, 105, 0.3);
}

.btn-secondary {
background: #F1F5F9;
color: #475569;
border: 2px solid #E2E8F0;
flex: 1;
}

.btn-secondary:hover {
background: #E2E8F0;
}

/* Results Section */
.results-section {
background: white;
border-radius: 15px;
}

/* Profit Cards */
.profit-cards {
display: grid;
grid-template-columns: repeat(2, 1fr);
gap: 20px;
margin-bottom: 30px;
}

.profit-card {
background: white;
border: 2px solid #E2E8F0;
border-radius: 12px;
padding: 25px;
text-align: center;
transition: all 0.3s;
}

.profit-card:hover {
border-color: #059669;
box-shadow: 0 5px 15px rgba(5, 150, 105, 0.1);
}

.profit-card.highlight {
border-color: #10b981;
background: #f0fdf4;
}

.profit-value {
font-size: 2.5rem;
font-weight: 800;
margin: 15px 0;
}

.profit-label {
color: #64748b;
font-size: 0.9rem;
}

.profit-positive {
color: #059669;
}

.profit-negative {
color: #dc2626;
}

.profit-neutral {
color: #475569;
}

/* Chart Container */
.chart-container {
background: white;
border: 2px solid #E2E8F0;
border-radius: 12px;
padding: 25px;
margin-bottom: 30px;
min-height: 300px;
display: flex;
align-items: center;
justify-content: center;
flex-direction: column;
}

.chart-placeholder {
width: 100%;
height: 250px;
background: #f8fafc;
border-radius: 8px;
display: flex;
align-items: center;
justify-content: center;
flex-direction: column;
color: #94a3b8;
}

.chart-placeholder i {
font-size: 3rem;
margin-bottom: 15px;
opacity: 0.5;
}

/* Breakdown Table */
.breakdown-table {
background: white;
border: 2px solid #E2E8F0;
border-radius: 12px;
overflow: hidden;
margin-bottom: 30px;
}

.table-row {
display: grid;
grid-template-columns: 2fr 1fr 1fr;
padding: 15px 20px;
border-bottom: 1px solid #E2E8F0;
}

.table-row.header {
background: #F8FAFC;
font-weight: 600;
color: #1e293b;
}

.table-row:last-child {
border-bottom: none;
}

.table-cell {
padding: 10px;
}

.table-cell.amount {
font-weight: 600;
color: #059669;
}

/* Business Insights */
.insights-card {
background: linear-gradient(to right, #e0f2fe, #bae6fd);
padding: 25px;
border-radius: 12px;
margin-bottom: 30px;
}

.insights-card h3 {
color: #0369a1;
margin-bottom: 20px;
}

.insight-item {
background: white;
padding: 15px;
border-radius: 8px;
margin-bottom: 10px;
border-left: 4px solid #10b981;
}

/* Actions */
.actions {
display: flex;
gap: 15px;
margin-top: 30px;
}

/* Footer */
.footer {
text-align: center;
padding: 30px;
background: #F8FAFC;
border-top: 1px solid #E2E8F0;
}

.footer-links {
display: flex;
justify-content: center;
gap: 30px;
margin-bottom: 20px;
flex-wrap: wrap;
}

.footer-links a {
color: #475569;
text-decoration: none;
font-weight: 500;
display: flex;
align-items: center;
gap: 8px;
transition: color 0.3s;
}

.footer-links a:hover {
color: #059669;
}

/* Success Message */
.success-message {
position: fixed;
bottom: 30px;
right: 30px;
background: #10B981;
color: white;
padding: 15px 25px;
border-radius: 10px;
box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
display: none;
align-items: center;
gap: 12px;
z-index: 1000;
}

/* Loader */
.loader {
display: none;
text-align: center;
padding: 40px;
}

.loader-spinner {
width: 50px;
height: 50px;
border: 4px solid #F1F5F9;
border-top: 4px solid #059669;
border-radius: 50%;
animation: spin 1s linear infinite;
margin: 0 auto 20px;
}

@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

/* Industry Selector */
.industry-selector {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 10px;
margin-top: 10px;
}

.industry-btn {
padding: 12px;
border: 2px solid #E2E8F0;
border-radius: 8px;
background: white;
cursor: pointer;
text-align: center;
transition: all 0.3s;
font-size: 0.9rem;
}

.industry-btn.active {
border-color: #059669;
background: #f0fdf4;
color: #059669;
}

@media (max-width: 768px) {
.header h1 {
font-size: 2rem;
}

.main-content {
padding: 25px;
}

.input-row {
grid-template-columns: 1fr;
}

.profit-cards {
grid-template-columns: 1fr;
}

.actions {
flex-direction: column;
}

.industry-selector {
grid-template-columns: repeat(2, 1fr);
}

.footer-links {
flex-direction: column;
gap: 15px;
}
}
</style>
</head>
<body>
<div class="container">
<!-- Header -->
<header class="header">
<div class="header-content">
<h1><i class="fas fa-calculator"></i> Profit Margin Calculator</h1>
<p>फ्री प्रॉफिट मार्जिन कैलकुलेटर। Gross profit, net profit, margin percentage calculate करें। Business profitability analysis tool।</p>
<div class="badge">
<i class="fas fa-chart-line"></i> Business Intelligence | <i class="fas fa-rupee-sign"></i> Financial Analysis
</div>
</div>
</header>

<!-- Main Content -->
<main class="main-content">
<!-- Input Section -->
<section class="input-section">
<h2><i class="fas fa-edit"></i> प्रॉफिट कैलकुलेट करें</h2>

<div class="form-group">
<label for="revenue"><i class="fas fa-money-bill-wave"></i> कुल राजस्व (Revenue):</label>
<div class="input-with-icon">
<span class="input-icon">₹</span>
<input type="number" id="revenue" placeholder="कुल बिक्री / Revenue">
</div>
</div>

<div class="form-group">
<label for="cogs"><i class="fas fa-box"></i> बेचे गए माल की लागत (COGS):</label>
<div class="input-with-icon">
<span class="input-icon">₹</span>
<input type="number" id="cogs" placeholder="Raw materials + Labor + Manufacturing">
</div>
</div>

<div class="form-group">
<label><i class="fas fa-file-invoice-dollar"></i> ऑपरेटिंग खर्चे:</label>
<div class="input-row">
<div class="input-with-icon">
<span class="input-icon">₹</span>
<input type="number" id="expenses" placeholder="कुल खर्चे">
</div>
<div class="input-with-icon">
<span class="input-icon">%</span>
<input type="number" id="expensePercent" placeholder="Revenue का %" max="100">
</div>
</div>
</div>

<div class="form-group">
<label><i class="fas fa-industry"></i> इंडस्ट्री टाइप:</label>
<div class="industry-selector">
<div class="industry-btn active" data-industry="retail">रिटेल</div>
<div class="industry-btn" data-industry="manufacturing">मैन्युफैक्चरिंग</div>
<div class="industry-btn" data-industry="service">सर्विस</div>
<div class="industry-btn" data-industry="ecommerce">ई-कॉमर्स</div>
<div class="industry-btn" data-industry="restaurant">रेस्टोरेंट</div>
<div class="industry-btn" data-industry="software">सॉफ्टवेयर</div>
</div>
</div>

<div class="form-group">
<label for="taxRate"><i class="fas fa-percentage"></i> टैक्स रेट:</label>
<div class="input-with-icon">
<span class="input-icon">%</span>
<input type="number" id="taxRate" value="18" placeholder="Tax percentage" max="100">
</div>
</div>

<button class="btn btn-primary" id="calculateBtn">
<i class="fas fa-calculator"></i> प्रॉफिट कैलकुलेट करें
</button>

<div class="loader" id="loader">
<div class="loader-spinner"></div>
<p>प्रॉफिट कैलकुलेशन चल रहा है...</p>
</div>

<div class="actions">
<button class="btn btn-secondary" id="clearBtn">
<i class="fas fa-redo"></i> रीसेट करें
</button>
<button class="btn btn-secondary" id="sampleBtn">
<i class="fas fa-chart-bar"></i> उदाहरण
</button>
<button class="btn btn-secondary" id="saveBtn">
<i class="fas fa-save"></i> सेव करें
</button>
</div>
</section>

<!-- Results Section -->
<section class="results-section">
<h2><i class="fas fa-chart-pie"></i> प्रॉफिट रिजल्ट्स</h2>

<!-- Profit Cards -->
<div class="profit-cards" id="profitCards" style="display: none;">
<div class="profit-card highlight">
<div class="profit-label">GROSS PROFIT MARGIN</div>
<div class="profit-value profit-positive" id="grossMargin">0%</div>
<div class="profit-label" id="grossProfitText">₹0</div>
</div>

<div class="profit-card">
<div class="profit-label">NET PROFIT MARGIN</div>
<div class="profit-value profit-positive" id="netMargin">0%</div>
<div class="profit-label" id="netProfitText">₹0</div>
</div>

<div class="profit-card">
<div class="profit-label">OPERATING MARGIN</div>
<div class="profit-value profit-positive" id="operatingMargin">0%</div>
<div class="profit-label" id="operatingProfitText">₹0</div>
</div>

<div class="profit-card">
<div class="profit-label">BREAK-EVEN POINT</div>
<div class="profit-value profit-neutral" id="breakEven">₹0</div>
<div class="profit-label">Revenue needed for zero profit</div>
</div>
</div>

<!-- Chart -->
<div class="chart-container" id="chartContainer" style="display: none;">
<h3><i class="fas fa-chart-bar"></i> प्रॉफिट ब्रेकडाउन</h3>
<div class="chart-placeholder" id="chartPlaceholder">
<i class="fas fa-chart-pie"></i>
<p>कैलकुलेट बटन दबाएं चार्ट देखने के लिए</p>
</div>
<canvas id="profitChart" style="width: 100%; height: 250px; display: none;"></canvas>
</div>

<!-- Breakdown Table -->
<div class="breakdown-table" id="breakdownTable" style="display: none;">
<div class="table-row header">
<div class="table-cell">विवरण</div>
<div class="table-cell">रकम</div>
<div class="table-cell">प्रतिशत</div>
</div>
<div class="table-row">
<div class="table-cell">कुल राजस्व</div>
<div class="table-cell amount" id="revenueAmount">₹0</div>
<div class="table-cell">100%</div>
</div>
<div class="table-row">
<div class="table-cell">बेचे गए माल की लागत</div>
<div class="table-cell amount" id="cogsAmount">₹0</div>
<div class="table-cell" id="cogsPercent">0%</div>
</div>
<div class="table-row">
<div class="table-cell">सकल लाभ</div>
<div class="table-cell amount profit-positive" id="grossProfitAmount">₹0</div>
<div class="table-cell profit-positive" id="grossProfitPercent">0%</div>
</div>
<div class="table-row">
<div class="table-cell">ऑपरेटिंग खर्चे</div>
<div class="table-cell amount" id="expensesAmount">₹0</div>
<div class="table-cell" id="expensesPercent">0%</div>
</div>
<div class="table-row">
<div class="table-cell">ऑपरेटिंग लाभ</div>
<div class="table-cell amount profit-positive" id="operatingProfitAmount">₹0</div>
<div class="table-cell profit-positive" id="operatingProfitPercent">0%</div>
</div>
<div class="table-row">
<div class="table-cell">टैक्स</div>
<div class="table-cell amount" id="taxAmount">₹0</div>
<div class="table-cell" id="taxPercent">0%</div>
</div>
<div class="table-row">
<div class="table-cell">शुद्ध लाभ</div>
<div class="table-cell amount profit-positive" id="netProfitAmount">₹0</div>
<div class="table-cell profit-positive" id="netProfitPercent">0%</div>
</div>
</div>

<!-- Business Insights -->
<div class="insights-card" id="insightsCard" style="display: none;">
<h3><i class="fas fa-lightbulb"></i> बिज़नेस इनसाइट्स</h3>
<div id="insightsContainer">
<!-- Insights will be added here -->
</div>
</div>

<!-- Actions -->
<div class="actions" id="resultActions" style="display: none;">
<button class="btn btn-primary" id="exportBtn">
<i class="fas fa-download"></i> रिपोर्ट डाउनलोड करें
</button>
<button class="btn btn-secondary" id="printBtn">
<i class="fas fa-print"></i> प्रिंट करें
</button>
<button class="btn btn-secondary" id="compareBtn">
<i class="fas fa-balance-scale"></i> तुलना करें
</button>
</div>
</section>
</main>

<!-- Footer -->
<footer class="footer">
<div class="footer-links">
<a href="all-tools.html"><i class="fas fa-tools"></i> सभी टूल्स</a>
<a href="index.html"><i class="fas fa-home"></i> होमपेज</a>
<a href="price-comparison-tool.html"><i class="fas fa-balance-scale"></i> प्राइस कंपेरिजन</a>
<a href="ecommerce-seo-tool.html"><i class="fas fa-shopping-cart"></i> ई-कॉमर्स SEO</a>
</div>
<div class="copyright">
<p>© 2024 Free SEO Tool Hub | Profit Margin Calculator</p>
<p style="margin-top: 5px; font-size: 0.85rem;">Business Financial Analysis Tool</p>
</div>
</footer>
</div>

<!-- Success Message -->
<div class="success-message" id="successMessage">
<i class="fas fa-check-circle"></i>
<span id="successText">Operation successful!</span>
</div>

<!-- Chart.js Library -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
// DOM Elements
const revenueInput = document.getElementById('revenue');
const cogsInput = document.getElementById('cogs');
const expensesInput = document.getElementById('expenses');
const expensePercentInput = document.getElementById('expensePercent');
const taxRateInput = document.getElementById('taxRate');
const industryButtons = document.querySelectorAll('.industry-btn');
const calculateBtn = document.getElementById('calculateBtn');
const clearBtn = document.getElementById('clearBtn');
const sampleBtn = document.getElementById('sampleBtn');
const saveBtn = document.getElementById('saveBtn');
const exportBtn = document.getElementById('exportBtn');
const printBtn = document.getElementById('printBtn');
const compareBtn = document.getElementById('compareBtn');
const loader = document.getElementById('loader');
const successMessage = document.getElementById('successMessage');
const successText = document.getElementById('successText');

// Results elements
const profitCards = document.getElementById('profitCards');
const chartContainer = document.getElementById('chartContainer');
const chartPlaceholder = document.getElementById('chartPlaceholder');
const profitChartCanvas = document.getElementById('profitChart');
const breakdownTable = document.getElementById('breakdownTable');
const insightsCard = document.getElementById('insightsCard');
const insightsContainer = document.getElementById('insightsContainer');
const resultActions = document.getElementById('resultActions');

// Profit elements
const grossMargin = document.getElementById('grossMargin');
const grossProfitText = document.getElementById('grossProfitText');
const netMargin = document.getElementById('netMargin');
const netProfitText = document.getElementById('netProfitText');
const operatingMargin = document.getElementById('operatingMargin');
const operatingProfitText = document.getElementById('operatingProfitText');
const breakEven = document.getElementById('breakEven');

// Breakdown elements
const revenueAmount = document.getElementById('revenueAmount');
const cogsAmount = document.getElementById('cogsAmount');
const cogsPercent = document.getElementById('cogsPercent');
const grossProfitAmount = document.getElementById('grossProfitAmount');
const grossProfitPercent = document.getElementById('grossProfitPercent');
const expensesAmount = document.getElementById('expensesAmount');
const expensesPercent = document.getElementById('expensesPercent');
const operatingProfitAmount = document.getElementById('operatingProfitAmount');
const operatingProfitPercent = document.getElementById('operatingProfitPercent');
const taxAmount = document.getElementById('taxAmount');
const taxPercent = document.getElementById('taxPercent');
const netProfitAmount = document.getElementById('netProfitAmount');
const netProfitPercent = document.getElementById('netProfitPercent');

let selectedIndustry = 'retail';
let profitChart = null;

// Industry selection
industryButtons.forEach(btn => {
btn.addEventListener('click', () => {
industryButtons.forEach(b => b.classList.remove('active'));
btn.classList.add('active');
selectedIndustry = btn.dataset.industry;
loadIndustryDefaults(selectedIndustry);
});
});

// Calculate profit
calculateBtn.addEventListener('click', calculateProfit);

// Clear
clearBtn.addEventListener('click', clearAll);

// Sample data
sampleBtn.addEventListener('click', loadSampleData);

// Save
saveBtn.addEventListener('click', saveCalculation);

// Export
exportBtn.addEventListener('click', exportReport);

// Print
printBtn.addEventListener('click', printReport);

// Compare
compareBtn.addEventListener('click', compareResults);

// Auto-calculate expense percentage
expensePercentInput.addEventListener('input', function() {
const revenue = parseFloat(revenueInput.value) || 0;
const percent = parseFloat(this.value) || 0;

if (revenue > 0 && percent > 0) {
expensesInput.value = (revenue * percent / 100).toFixed(2);
}
});

// Auto-calculate percentage from expenses
expensesInput.addEventListener('input', function() {
const revenue = parseFloat(revenueInput.value) || 0;
const expenses = parseFloat(this.value) || 0;

if (revenue > 0 && expenses > 0) {
expensePercentInput.value = ((expenses / revenue) * 100).toFixed(2);
}
});

function loadIndustryDefaults(industry) {
const defaults = {
retail: { cogsPercent: 60, expensePercent: 20 },
manufacturing: { cogsPercent: 45, expensePercent: 25 },
service: { cogsPercent: 30, expensePercent: 40 },
ecommerce: { cogsPercent: 55, expensePercent: 25 },
restaurant: { cogsPercent: 65, expensePercent: 25 },
software: { cogsPercent: 15, expensePercent: 50 }
};

const defaultsData = defaults[industry] || defaults.retail;

// Update expense percentage
expensePercentInput.value = defaultsData.expensePercent;

// Auto-calculate COGS if revenue exists
const revenue = parseFloat(revenueInput.value) || 0;
if (revenue > 0) {
cogsInput.value = (revenue * defaultsData.cogsPercent / 100).toFixed(2);
expensesInput.value = (revenue * defaultsData.expensePercent / 100).toFixed(2);
}
}

function calculateProfit() {
const revenue = parseFloat(revenueInput.value) || 0;
const cogs = parseFloat(cogsInput.value) || 0;
const expenses = parseFloat(expensesInput.value) || 0;
const taxRate = parseFloat(taxRateInput.value) || 0;

if (revenue <= 0) {
showMessage('कृपया वैध राजस्व डालें!', 'error');
return;
}

if (cogs > revenue) {
showMessage('COGS, राजस्व से ज्यादा नहीं हो सकता!', 'error');
return;
}

// Show loader
loader.style.display = 'block';
hideResults();

// Simulate calculation
setTimeout(() => {
const results = performProfitCalculation(revenue, cogs, expenses, taxRate);
displayResults(results);
loader.style.display = 'none';
showMessage('प्रॉफिट कैलकुलेशन सफल!', 'success');
}, 1000);
}

function performProfitCalculation(revenue, cogs, expenses, taxRate) {
// Calculate all metrics
const grossProfit = revenue - cogs;
const grossMarginPercent = (grossProfit / revenue) * 100;

const operatingProfit = grossProfit - expenses;
const operatingMarginPercent = (operatingProfit / revenue) * 100;

const tax = operatingProfit * (taxRate / 100);
const netProfit = operatingProfit - tax;
const netMarginPercent = (netProfit / revenue) * 100;

// Calculate break-even point
const contributionMargin = grossMarginPercent / 100;
const breakEvenPoint = expenses / contributionMargin;

// Calculate percentages
const cogsPercent = (cogs / revenue) * 100;
const expensesPercent = (expenses / revenue) * 100;
const taxPercent = (tax / revenue) * 100;

// Industry benchmarks
const benchmarks = getIndustryBenchmarks(selectedIndustry);

return {
revenue,
cogs,
grossProfit,
grossMarginPercent,
expenses,
operatingProfit,
operatingMarginPercent,
tax,
netProfit,
netMarginPercent,
breakEvenPoint,
cogsPercent,
expensesPercent,
taxPercent,
benchmarks
};
}

function getIndustryBenchmarks(industry) {
const benchmarks = {
retail: { grossMargin: 40, netMargin: 10 },
manufacturing: { grossMargin: 45, netMargin: 12 },
service: { grossMargin: 70, netMargin: 20 },
ecommerce: { grossMargin: 45, netMargin: 15 },
restaurant: { grossMargin: 35, netMargin: 8 },
software: { grossMargin: 85, netMargin: 25 }
};
return benchmarks[industry] || benchmarks.retail;
}

function displayResults(results) {
const {
revenue,
cogs,
grossProfit,
grossMarginPercent,
expenses,
operatingProfit,
operatingMarginPercent,
tax,
netProfit,
netMarginPercent,
breakEvenPoint,
cogsPercent,
expensesPercent,
taxPercent,
benchmarks
} = results;

// Update profit cards
updateProfitCard(grossMargin, grossMarginPercent.toFixed(1), grossProfitText, formatCurrency(grossProfit));
updateProfitCard(netMargin, netMarginPercent.toFixed(1), netProfitText, formatCurrency(netProfit));
updateProfitCard(operatingMargin, operatingMarginPercent.toFixed(1), operatingProfitText, formatCurrency(operatingProfit));
breakEven.textContent = formatCurrency(breakEvenPoint);

// Update breakdown table
revenueAmount.textContent = formatCurrency(revenue);
cogsAmount.textContent = formatCurrency(cogs);
cogsPercent.textContent = cogsPercent.toFixed(1) + '%';
grossProfitAmount.textContent = formatCurrency(grossProfit);
grossProfitPercent.textContent = grossMarginPercent.toFixed(1) + '%';
expensesAmount.textContent = formatCurrency(expenses);
expensesPercent.textContent = expensesPercent.toFixed(1) + '%';
operatingProfitAmount.textContent = formatCurrency(operatingProfit);
operatingProfitPercent.textContent = operatingMarginPercent.toFixed(1) + '%';
taxAmount.textContent = formatCurrency(tax);
taxPercent.textContent = taxPercent.toFixed(1) + '%';
netProfitAmount.textContent = formatCurrency(netProfit);
netProfitPercent.textContent = netMarginPercent.toFixed(1) + '%';

// Update insights
generateInsights(results, benchmarks);

// Show results sections
profitCards.style.display = 'grid';
chartContainer.style.display = 'block';
breakdownTable.style.display = 'block';
insightsCard.style.display = 'block';
resultActions.style.display = 'flex';

// Create chart
createChart(results);
}

function updateProfitCard(element, value, textElement, text) {
element.textContent = value + '%';
textElement.textContent = text;

// Add color based on value
const numValue = parseFloat(value);
if (numValue < 0) {
element.classList.remove('profit-positive');
element.classList.add('profit-negative');
} else if (numValue < 10) {
element.classList.remove('profit-positive');
element.classList.add('profit-neutral');
} else {
element.classList.remove('profit-negative', 'profit-neutral');
element.classList.add('profit-positive');
}
}

function createChart(results) {
// Destroy existing chart
if (profitChart) {
profitChart.destroy();
}

// Hide placeholder, show chart
chartPlaceholder.style.display = 'none';
profitChartCanvas.style.display = 'block';

// Prepare data for chart
const data = [
results.cogs,
results.expenses,
results.tax,
results.netProfit
];

const labels = ['COGS', 'Expenses', 'Tax', 'Net Profit'];
const colors = ['#ef4444', '#f59e0b', '#3b82f6', '#10b981'];

// Create chart
const ctx = profitChartCanvas.getContext('2d');
profitChart = new Chart(ctx, {
type: 'doughnut',
data: {
labels: labels,
datasets: [{
data: data,
backgroundColor: colors,
borderWidth: 1
}]
},
options: {
responsive: true,
maintainAspectRatio: false,
plugins: {
legend: {
position: 'bottom'
},
tooltip: {
callbacks: {
label: function(context) {
let label = context.label || '';
if (label) {
label += ': ';
}
const value = context.parsed;
const percentage = ((value / results.revenue) * 100).toFixed(1);
label += formatCurrency(value) + ' (' + percentage + '%)';
return label;
}
}
}
}
}
});
}

function generateInsights(results, benchmarks) {
const insights = [];
const { grossMarginPercent, netMarginPercent } = results;
const { grossMargin: targetGross, netMargin: targetNet } = benchmarks;

// Gross margin insight
if (grossMarginPercent > targetGross) {
insights.push({
icon: 'fas fa-trophy',
color: 'green',
text: `बहुत बढ़िया! आपका Gross Margin (${grossMarginPercent.toFixed(1)}%) industry average (${targetGross}%) से बेहतर है।`
});
} else if (grossMarginPercent < targetGross - 10) {
insights.push({
icon: 'fas fa-exclamation-triangle',
color: 'red',
text: `ध्यान दें: आपका Gross Margin (${grossMarginPercent.toFixed(1)}%) industry average (${targetGross}%) से कम है। COGS कम करने पर विचार करें।`
});
} else {
insights.push({
icon: 'fas fa-chart-line',
color: 'blue',
text: `आपका Gross Margin (${grossMarginPercent.toFixed(1)}%) industry average (${targetGross}%) के करीब है।`
});
}

// Net margin insight
if (netMarginPercent > targetNet) {
insights.push({
icon: 'fas fa-check-circle',
color: 'green',
text: `शानदार! आपका Net Profit Margin (${netMarginPercent.toFixed(1)}%) industry average (${targetNet}%) से बेहतर है।`
});
} else if (netMarginPercent < 5) {
insights.push({
icon: 'fas fa-exclamation-circle',
color: 'orange',
text: `सावधान: आपका Net Profit Margin (${netMarginPercent.toFixed(1)}%) बहुत कम है। खर्चों को review करें।`
});
}

// Break-even insight
const breakEvenRatio = results.breakEvenPoint / results.revenue;
if (breakEvenRatio < 0.7) {
insights.push({
icon: 'fas fa-shield-alt',
color: 'green',
text: `आपका break-even point आपके current revenue का ${(breakEvenRatio * 100).toFixed(0)}% है, जो सुरक्षित है।`
});
}

// Expense insight
const expenseRatio = results.expenses / results.revenue;
if (expenseRatio > 0.4) {
insights.push({
icon: 'fas fa-money-bill-wave',
color: 'orange',
text: `आपके खर्चे revenue का ${(expenseRatio * 100).toFixed(1)}% हैं। Cost optimization पर विचार करें।`
});
}

// Update insights container
insightsContainer.innerHTML = '';
insights.forEach(insight => {
const insightElement = document.createElement('div');
insightElement.className = 'insight-item';
insightElement.style.borderLeftColor = insight.color;
insightElement.innerHTML = `
<i class="${insight.icon}" style="color: ${insight.color}; margin-right: 10px;"></i>
${insight.text}
`;
insightsContainer.appendChild(insightElement);
});
}

function clearAll() {
revenueInput.value = '';
cogsInput.value = '';
expensesInput.value = '';
expensePercentInput.value = '';
taxRateInput.value = '18';

// Reset industry to retail
industryButtons.forEach(btn => {
btn.classList.remove('active');
if (btn.dataset.industry === 'retail') {
btn.classList.add('active');
}
});
selectedIndustry = 'retail';

hideResults();
showMessage('सभी डेटा रीसेट किया गया!', 'success');
}

function loadSampleData() {
revenueInput.value = '1000000';
cogsInput.value = '600000';
expensesInput.value = '200000';
expensePercentInput.value = '20';
taxRateInput.value = '18';

showMessage('उदाहरण डेटा लोड हो गया!', 'success');
setTimeout(() => {
calculateProfit();
}, 500);
}

function saveCalculation() {
const calculation = {
revenue: revenueInput.value,
cogs: cogsInput.value,
expenses: expensesInput.value,
taxRate: taxRateInput.value,
industry: selectedIndustry,
date: new Date().toLocaleString(),
results: getCurrentResults()
};

const savedCalculations = JSON.parse(localStorage.getItem('profitCalculations') || '[]');
savedCalculations.push(calculation);
localStorage.setItem('profitCalculations', JSON.stringify(savedCalculations));

showMessage('कैलकुलेशन सेव हो गया!', 'success');
}

function exportReport() {
const report = {
title: 'Profit Margin Analysis Report',
date: new Date().toLocaleString(),
inputs: {
revenue: revenueInput.value,
cogs: cogsInput.value,
expenses: expensesInput.value,
taxRate: taxRateInput.value,
industry: selectedIndustry
},
results: getCurrentResults()
};

const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
const url = URL.createObjectURL(blob);
const a = document.createElement('a');
a.href = url;
a.download = `profit-report-${Date.now()}.json`;
document.body.appendChild(a);
a.click();
document.body.removeChild(a);
URL.revokeObjectURL(url);

showMessage('रिपोर्ट डाउनलोड हो गई!', 'success');
}

function printReport() {
window.print();
}

function compareResults() {
showMessage('तुलना फीचर जल्द ही आ रहा है!', 'info');
}

function getCurrentResults() {
return {
grossMargin: grossMargin.textContent,
netMargin: netMargin.textContent,
operatingMargin: operatingMargin.textContent,
breakEven: breakEven.textContent,
netProfit: netProfitAmount.textContent
};
}

function hideResults() {
profitCards.style.display = 'none';
chartContainer.style.display = 'none';
breakdownTable.style.display = 'none';
insightsCard.style.display = 'none';
resultActions.style.display = 'none';

// Reset chart
if (profitChart) {
profitChart.destroy();
profitChart = null;
}
chartPlaceholder.style.display = 'flex';
profitChartCanvas.style.display = 'none';
}

function formatCurrency(amount) {
return '₹' + amount.toLocaleString('en-IN', {
minimumFractionDigits: 2,
maximumFractionDigits: 2
});
}

function showMessage(message, type) {
successText.textContent = message;

if (type === 'error') {
successMessage.style.background = '#dc2626';
} else if (type === 'info') {
successMessage.style.background = '#3b82f6';
} else {
successMessage.style.background = '#10b981';
}

successMessage.style.display = 'flex';

setTimeout(() => {
successMessage.style.display = 'none';
}, 3000);
}

// Initialize
loadIndustryDefaults(selectedIndustry);
</script>
</body>
</html>
